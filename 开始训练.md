# 🚀 开始训练 - 3步快速上手

## 📊 您的数据

✅ **数据文件**: `data/converted/merged_dataset.jsonl`  
✅ **52,158个样本** | 5个宿主（E_coli, Human, Mouse, S_cerevisiae, P_pastoris）  
✅ **已准备好5个训练方案**

---

## ⚡ 快速开始（推荐）

### 第1步：快速测试（1分钟）

```bash
cd /mnt/c/Users/xiayh17/Projects/coursepicker_starter/coursepicker/codon_verifier_ext

docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_quick.json
```

**作用**: 用1000个样本快速验证训练流程正常

### 第2步：查看结果

```bash
cat data/output/training/training_real_quick_result.json | python3 -m json.tool
```

### 第3步：生产训练（5-10分钟）

```bash
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_balanced.json
```

**作用**: 训练15000样本的平衡多宿主模型（生产推荐）

---

## 🎯 5个训练方案

| 方案 | 命令 | 样本数 | 用时 | 说明 |
|------|------|--------|------|------|
| **1. 快速测试** | `training_real_quick.json` | 1,000 | 1-2分钟 | 验证流程 |
| **2. 平衡训练⭐** | `training_real_balanced.json` | 15,000 | 5-10分钟 | **推荐生产使用** |
| **3. 主要宿主** | `training_real_main_hosts.json` | 15,000 | 8-15分钟 | E_coli+Human+Mouse |
| **4. 宿主特定** | `training_real_host_specific.json` | 各5,000 | 10-20分钟 | 4个独立模型 |
| **5. 完整训练** | `training_real_full.json` | 52,158 | 15-30分钟 | 全部数据 |

---

## 🎨 交互式训练脚本

```bash
# 运行交互式脚本（会提示选择训练方案）
./scripts/run_all_training.sh
```

脚本会显示菜单让您选择要运行的方案。

---

## 📋 完整命令示例

### 方案1: 快速测试
```bash
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_quick.json
```

### 方案2: 平衡训练（推荐）
```bash
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_balanced.json
```

### 方案3: 主要宿主
```bash
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_main_hosts.json
```

### 方案4: 宿主特定模型
```bash
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_host_specific.json
```

### 方案5: 完整训练
```bash
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_full.json
```

---

## 📊 查看结果

### 查看训练日志
```bash
# 查看最新训练结果
cat data/output/training/training_real_*_result.json | python3 -m json.tool

# 列出所有训练日志
ls -lh data/output/training/
```

### 查看训练模型
```bash
# 列出所有模型
ls -lh data/output/models/

# 如果是宿主特定模型
ls -lh data/output/models/host_specific/
```

---

## 💡 推荐流程

**首次使用**:
```bash
# 1. 快速测试（必做）
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_quick.json

# 2. 查看结果确认正常
cat data/output/training/training_real_quick_result.json | python3 -m json.tool

# 3. 运行平衡训练（生产推荐）
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_balanced.json

# 4. 查看最终结果
cat data/output/training/training_real_balanced_result.json | python3 -m json.tool
```

**生产使用**:
- ✅ 推荐使用 **方案2: 平衡训练**（15000样本，5-10分钟）
- ✅ 如需最佳性能，使用 **方案5: 完整训练**（52158样本，15-30分钟）
- ✅ 如只关注特定宿主，使用 **方案3: 主要宿主**

---

## 🔍 实时监控

在另一个终端查看训练进度：

```bash
cd /mnt/c/Users/xiayh17/Projects/coursepicker_starter/coursepicker/codon_verifier_ext
docker-compose -f docker-compose.microservices.yml logs -f training
```

---

## 🐛 遇到问题？

### 查看详细日志
```bash
docker-compose -f docker-compose.microservices.yml logs training
```

### 重新构建服务
```bash
docker-compose -f docker-compose.microservices.yml build training
```

### 检查数据文件
```bash
ls -lh data/converted/merged_dataset.jsonl
head -n 3 data/converted/merged_dataset.jsonl
```

---

## 📚 更多文档

- **详细指南**: `RUN_TRAINING.md`
- **训练服务文档**: `README.training.md`
- **快速开始**: `START_TRAINING.md`

---

## 🎉 立即开始

```bash
# 一行命令开始训练！
cd /mnt/c/Users/xiayh17/Projects/coursepicker_starter/coursepicker/codon_verifier_ext && \
docker-compose -f docker-compose.microservices.yml run --rm training \
  --input /data/input/training_real_quick.json
```

**祝训练顺利！** 🚀

